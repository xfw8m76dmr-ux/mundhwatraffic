<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üö¶ Mundhwa Bridge Pune Traffic Live | Real-Time Camera</title>
  <meta name="description" content="Watch live Mundhwa Bridge traffic in Pune, India ‚Äî streaming 24/7 with RoadX smart camera technology. Check road conditions before you travel." />
  <meta name="robots" content="index,follow,max-image-preview:large" />

  <!-- OG / Social -->
  <meta property="og:title" content="üö¶ Mundhwa Traffic Live | Pune" />
  <meta property="og:description" content="Watch Mundhwa Bridge traffic live from Pune. Real-time RoadX camera feed updated 24/7." />
  <meta property="og:image" content="https://mundhwatraffic.com/assets/og-preview.png" />
  <meta property="og:url" content="https://mundhwatraffic.com" />
  <meta property="og:type" content="video.other" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="üö¶ Mundhwa Traffic Live | Pune">
  <meta name="twitter:description" content="Watch real-time traffic at Mundhwa Bridge, Pune, India.">
  <meta name="twitter:image" content="https://mundhwatraffic.com/assets/og-preview.png">

  <!-- Icons -->
  <link rel="icon" href="/favicon-32x32.png" sizes="32x32" />
  <link rel="apple-touch-icon" href="/favicon-512.png" />
  <link rel="manifest" href="/site.webmanifest" />

<!-- Preload GA -->
<link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=G-TVFRVGXERM" as="script">

  <script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "FAQPage",
"mainEntity": [
{
 "@type": "Question",
 "name": "Is Mundhwa Bridge jammed right now?",
 "acceptedAnswer": {
   "@type": "Answer",
   "text": "You can check the real-time Mundhwa Bridge traffic jam status on this page, updated every few minutes."
 }
},
{
 "@type": "Question",
 "name": "What time is peak traffic at Mundhwa?",
 "acceptedAnswer": {
   "@type": "Answer",
   "text": "Peak traffic at Mundhwa typically occurs between 9:00‚Äì11:00 AM and 6:00‚Äì8:30 PM, depending on office timings."
 }
},
{
 "@type": "Question",
 "name": "How long is the delay on Mundhwa Bridge?",
 "acceptedAnswer": {
   "@type": "Answer",
   "text": "Delay varies between 5‚Äì25 minutes based on congestion. Live delay indicators are shown on this page."
 }
},
{
 "@type": "Question",
 "name": "Does Mundhwa Bridge have a live camera?",
 "acceptedAnswer": {
   "@type": "Answer",
   "text": "Yes, the live CCTV snapshot updates every few minutes, giving a real-time view of traffic."
 }
},
{
 "@type": "Question",
 "name": "How accurate is the Mundhwa traffic data?",
 "acceptedAnswer": {
   "@type": "Answer",
   "text": "All data is updated regularly using live camera snapshots and real-time congestion indicators."
 }
}
]
}
</script>


<script type="application/ld+json">
{
 "@context": "https://schema.org",
 "@type": "LocalBusiness",
 "name": "Mundhwa Traffic Live",
 "description": "Real-time Mundhwa Bridge traffic and live CCTV updates.",
 "areaServed": "Mundhwa, Pune",
 "url": "https://mundhwatraffic.com"
}
</script>


<script defer>
  window.dataLayer = window.dataLayer || [];
  function gtag(){ dataLayer.push(arguments); }

  gtag('js', new Date());
  gtag('config', 'G-TVFRVGXERM', {
    anonymize_ip: true,
    transport_type: 'beacon',
    send_page_view: true
  });

  // Load GA script with retry
  (function loadGA(){
    var g = document.createElement('script');
    g.src = "https://www.googletagmanager.com/gtag/js?id=G-TVFRVGXERM";
    g.async = true;
    g.onerror = function(){
      console.warn("GA retry...");
      setTimeout(loadGA, 1500);
    };
    document.head.appendChild(g);
  })();
</script>

<script>
// Wait until GA is ready before setting user properties
function waitForGA(callback, tries = 20) {
  if (typeof gtag === "function" && window.dataLayer) {
    callback();
  } else if (tries > 0) {
    setTimeout(() => waitForGA(callback, tries - 1), 150);
  }
}

fetch('/geo')
  .then((res) => res.json())
  .then((loc) => {
    waitForGA(() => {
      // GA4 user properties update (correct format)
      gtag('set', 'user_properties', {
        user_area: loc?.area || 'unknown',
        user_zone: loc?.zone || 'unknown'
      });
    });
  })
  .catch(err => {
    console.error("Geo fetch failed:", err);
  });

</script>

<style>
  body {
    margin:0;
    font-family:system-ui,Inter,sans-serif;
    background:#0b0b0b;
    color:#fff;
    text-align:center;
  }

  header {
    padding:1.2rem 0 .2rem;
    font-size:1.6rem;
    font-weight:600;
  }

  #subtitle {
    margin-top:.2rem;
    opacity:.85;
    font-size:1rem;
  }

  main { padding:1rem; }

  #yt-container {
    position:relative;
    max-width:960px;
    margin:1.2rem auto;
    aspect-ratio:16/9;
    background:black;
    border-radius:12px;
    overflow:hidden;
  }
  #yt-container iframe,
  #yt-container img {
    width:100%;
    height:100%;
    display:block;
    border-radius:12px;
  }
  #yt-overlay {
    position:absolute;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
  }
  #yt-overlay span {
    font-size:1.35rem;
    opacity:.9;
    background:#0007;
    padding:.55rem 1.25rem;
    border-radius:10px;
    backdrop-filter:blur(4px);
  }

  #share-icons {
    display:flex;
    justify-content:center;
    gap:.85rem;
    margin-top:1rem;
  }
  #share-icons img {
    width:38px;
    height:38px;
    cursor:pointer;
  }

  .primary-btn {
    margin-top:1.4rem;
    background:#1d87ff;
    color:#fff;
    border:none;
    padding:.85rem 2rem;
    border-radius:12px;
    font-size:1.1rem;
    font-weight:600;
    display:inline-flex;
    align-items:center;
    gap:0.5rem;
    cursor:pointer;
  }
  .primary-btn img {
    width:20px;
    height:20px;
  }

  #viewer-count {
    margin-top:1.5rem;
    opacity:.9;
    font-size:1rem;
  }

  footer {
    opacity:.8;
    font-size:.9rem;
    margin-top:2rem;
    padding-bottom:1rem;
  }

  .notify-wrap{
    margin-top: 1.5rem;
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    align-items: stretch;
  }

  .notify-btn{
    width: 80%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.6rem;
    padding: 0.9rem 1rem;
    font-size: 0.87;
    font-weight: 700;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    margin: 0 auto;
    background: linear-gradient(180deg, #ffb84d 0%, #ff9f1a 100%);
    color: #0b0b00;
    box-shadow: 0 6px 18px rgba(255,159,26,0.18), inset 0 -2px 0 rgba(0,0,0,0.06);
    transition: transform 160ms ease, box-shadow 160ms ease;
  }
  .notify-btn:hover{ transform: translateY(-2px); box-shadow: 0 10px 26px rgba(255,159,26,0.22); }
  .notify-btn:active{ transform: translateY(0); box-shadow: 0 6px 18px rgba(255,159,26,0.18); }
  .notify-btn:focus{ outline: 3px solid rgba(255,159,26,0.18); outline-offset: 3px; }

  .notify-desc{
    font-size: 0.86rem;
    color: rgba(255,255,255,0.72);
    text-align: center;
    max-width: 42ch;
    margin: 0 auto;
  }

  @media (prefers-reduced-motion: reduce){
    .notify-btn{ transition: none; transform: none; }
  }

  @media (prefers-color-scheme: light){
    .notify-btn{
      color:#000;
      background: linear-gradient(180deg,#ffd58a 0%,#ffb84d 100%);
    }
    .notify-desc{ color: rgba(0,0,0,0.64); }
  }
</style>

</head>

<body>

<header>üö¶ Live Traffic View ‚Äì Mundhwa Bridge, Pune</header>
<div id="subtitle">Watch real-time traffic before you start your trip.</div>

<main>

  <div id="yt-container">
    <img src="https://mundhwatraffic.com/assets/video_background.png"
         alt="Mundhwa Bridge Live Traffic Pune Preview"
         width="960" height="540"
         loading="eager" fetchpriority="high">

    <div id="yt-overlay"> 
      <!-- <span> üöß Camera under  Traffic updates continue ‚Äî subscribe to get instant alerts when Mundhwa jams.</span> -->
      
    <span> Play Live </span>
    </div>
  </div>

<div class="notify-wrap" role="region" aria-label="Traffic alert signup">
  <button id="notifyBtn" class="notify-btn" aria-describedby="notify-desc">
    üîî Alert me on WhatsApp when Mundhwa is jammed
  </button>
  <div id="notify-desc" class="notify-desc">No spam ‚Äî only realtime jam alerts for this route.</div>
  <div id="notify-desc" class="notify-desc">AI-powered alerts ‚Äî may be imperfect at times. </div>
</div>

  
  <div id="notifyHelp" style="
  display:block;
  color:#0f0;
  font-family:monospace;
  padding:10px;
  margin-top:10px;
  white-space:pre-wrap;
  border-radius:8px;
  max-height:300px;
  overflow-y:auto;
"></div>

  <section>
    <h3 style="margin-top:1.4rem;">üì¢ Share MundhwaTraffic with someone stuck in traffic üöó‚ö†Ô∏è</h3>
    <div id="share-icons">
      <a href="https://api.whatsapp.com/send?text=üö¶%20Check%20Mundhwa%20Traffic%20Live%20https://mundhwatraffic.com/w" target="_blank">
        <img src="/assets/icons/whatsapp.svg">
      </a>

      <a href="https://twitter.com/intent/tweet?text=üö¶%20Mundhwa%20Traffic%20Live&url=https://mundhwatraffic.com/x" target="_blank">
        <img src="/assets/icons/x.svg">
      </a>

      <a href="https://www.facebook.com/sharer/sharer.php?u=https://mundhwatraffic.com/f" target="_blank">
        <img src="/assets/icons/facebook.svg">
      </a>

      <img id="nativeShareBtn" src="/assets/icons/share.svg">
    </div>
  </section>

  <p id="bookmarkHelp" style="display:none;margin-top:0.8rem;opacity:.9;"></p>

  <div id="viewer-count">üî¥ Live on YouTube</div>

  <button id="installBtn" class="primary-btn" style="display:none;margin-top:1.2rem;">
    üì± Add to Home Screen
  </button>

  <div id="debugBox" style="
  white-space:pre-wrap;
  color:#0f0;
  padding:10px;
  margin-top:20px;
  font-size:14px;
  font-family:monospace;
  max-height:300px;
  overflow:auto;
  border-radius:6px;
"></div>

</main>

<footer>
  ¬© 2025 <a href="/" style="color:#9cc6ff">mundhwatraffic.com</a> |
  Powered by <strong>RoadX Traffic Cameras</strong>
</footer>

<script>
document.getElementById("yt-overlay").addEventListener("click", () => {
  const container = document.getElementById("yt-container");

  // skip if maintenance mode is active
  if (container.textContent.toLowerCase().includes("maintenance")) return;

  // ‚úÖ SAFE: remove all children without touching the container itself
  while (container.firstChild) {
    container.removeChild(container.firstChild);
  }

  const iframe = document.createElement("iframe");
  iframe.src =
    "https://www.youtube.com/embed/live_stream?channel=UCOCdYbhwwwgNXj58pHsU1Fw&autoplay=1&mute=1&playsinline=1&enablejsapi=1&rel=0&controls=1&origin=https://mundhwatraffic.com";
  iframe.allow =
    "accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture;";
  iframe.allowFullscreen = true;
  iframe.style.width = "100%";
  iframe.style.height = "100%";
  iframe.style.border = "none";
  iframe.style.borderRadius = "12px";

  container.appendChild(iframe);
});

setInterval(() => {
  const iframe = document.querySelector("#yt-container iframe");
  if (iframe) {
    iframe.contentWindow.postMessage(
      '{"event":"command","func":"playVideo"}',
      "*"
    );
  }
}, 15000);

const nativeShare = document.getElementById("nativeShareBtn");
if (navigator.share) {
  nativeShare.addEventListener("click", () => {
    navigator.share({
      title:"üö¶ Mundhwa Traffic Live | Pune",
      text:"Check live Mundhwa Bridge traffic.",
      url:"https://mundhwatraffic.com/web"
    });
  });
} else {
  nativeShare.style.opacity = "0.4";
}

const bookmarkBtn = document.getElementById('bookmarkBtn');
const bookmarkHelp = document.getElementById('bookmarkHelp');
const ua = navigator.userAgent.toLowerCase();

if (/iphone|ipad|ipod/.test(ua)) {
  bookmarkHelp.innerHTML = "‚¨ÜÔ∏è Share ‚Üí Add to Home Screen";
} else if (/android/.test(ua)) {
  bookmarkHelp.innerHTML = "‚ãÆ Menu ‚Üí Add to Home Screen";
} else if (navigator.platform.toUpperCase().includes("MAC")) {
  bookmarkHelp.innerHTML = "Press <b>Cmd + D</b> to bookmark.";
} else {
  bookmarkHelp.innerHTML = "Press <b>Ctrl + D</b> to bookmark.";
}

bookmarkBtn.addEventListener("click", () => {
  bookmarkHelp.style.display = "block";
});

let deferredPrompt;
const installBtn = document.getElementById("installBtn");

window.addEventListener("beforeinstallprompt", (e) => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = "inline-block";
});

installBtn.addEventListener("click", () => {
  installBtn.style.display = "none";
  deferredPrompt.prompt();
  deferredPrompt = null;
});

if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("/service-worker.js");
}
</script>

<script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>

<script>
const notifyBtn = document.getElementById("notifyBtn");
const notifyHelp = document.getElementById("notifyHelp");

/* Display helper */
function show(msg){
  notifyHelp.style.display = "block";
  notifyHelp.innerHTML = msg;
}

/* -----------------------
   Device + Browser Detection
------------------------*/
const ua2 = navigator.userAgent.toLowerCase();

const isIOS = /iphone|ipad|ipod/.test(ua2);
const isMacSafari =
  /macintosh/.test(ua2) &&
  /safari/.test(ua2) &&
  !/chrome|firefox|edge/.test(ua2);

const isPWA =
  window.matchMedia('(display-mode: standalone)').matches ||
  window.navigator.standalone === true;

const isFacebookBrowser =
  navigator.userAgent.includes("FBAN") ||
  navigator.userAgent.includes("FBAV");

const isInstagramBrowser =
  navigator.userAgent.includes("Instagram");

window.OneSignalDeferred = window.OneSignalDeferred || [];
OneSignalDeferred.push(async function(OneSignal) {
  try {
    await OneSignal.init({
      appId: "4431abd4-0179-41dd-8336-d8ba2f83f93a",
      serviceWorkerPath: "OneSignalSDKWorker.js",
      serviceWorkerParam: { scope: "/" },
      notifyButton: { enable: false }
    });
    console.log("OneSignal initialized.");
  } catch (e) {
    console.error("Init error:", e);
  }
});

notifyBtn.addEventListener("click", async () => {

  alert("You'll get instant browser alerts for now. WhatsApp alerts coming soon.");


  /* ---- FB/IG In-app Browser Block ---- */
  if (isFacebookBrowser || isInstagramBrowser) {

    if (isIOS) {
      showToast(`
        ‚ö†Ô∏è Traffic alerts can't work inside Facebook on iPhone.
        To enable alerts:
        1Ô∏è‚É£ Tap ‚Ä¢‚Ä¢‚Ä¢ in top-right
        2Ô∏è‚É£ Tap Open in Safari
        3Ô∏è‚É£ Safari ‚Üí "Share" ‚Üí Add to Home Screen
        4Ô∏è‚É£ Open the app from your home screen
        üîî Then tap Notify again.
      `);
    } else {
      showToast(`
        ‚ö†Ô∏è Facebook browser does not support traffic alerts.
        Please open this page in "Chrome" to enable notifications.
        üëâ Tap the "menu ‚Üí Open in browser
      `);
    }

    return;
  }

  /* ---- iOS requires PWA ---- */
  if (isIOS && !isPWA) {
    showToast(`
      üì± Add to Home Screen required:
      To receive traffic alerts:
      ‚Üí Tap Share
      ‚Üí Tap Add to Home Screen
      Then open from the home screen.
    `);
    return;
  }

  try {
    const permission = await OneSignal.Notifications.requestPermission();

    if (!permission) return;

    showToast("‚è≥ Subscribing‚Ä¶");
    await OneSignal.User.PushSubscription.optIn();

    const isEnabled = await OneSignal.User.PushSubscription.isOptedIn();

    if (isEnabled) {
      showToast("‚úÖ You will now receive traffic alerts!");
    }
  } catch (err) {
    showToast("‚úÖ You will now receive traffic alerts!");
    console.error(err);
  }
});
</script>

  <script>
(function() {
  const ua = navigator.userAgent.toLowerCase();

  const isIOS = /iphone|ipad|ipod/.test(ua);
  const isPWA =
    window.matchMedia('(display-mode: standalone)').matches ||
    navigator.standalone === true;

  if (isIOS && isPWA) {
    const audio = document.createElement("audio");
    audio.autoplay = true;
    audio.loop = true;
    audio.hidden = true;

    // Inline silent MP3 (no network call)
    audio.src =
      "data:audio/mp3;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";

    document.body.appendChild(audio);

    console.log("iOS PWA keepalive audio enabled");
  }
})();
</script>

    <script>
    // üëâ Put showToast function HERE
    function showToast(message) {
      const toast = document.createElement("div");
      toast.textContent = message;
      toast.style = `
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: #222;
        color: #fff;
        padding: 12px 18px;
        border-radius: 8px;
        font-size: 14px;
        opacity: 0;
        transition: opacity 0.4s;
        z-index: 99999;
      `;
      document.body.appendChild(toast);

      requestAnimationFrame(() => { toast.style.opacity = 1; });

      setTimeout(() => {
        toast.style.opacity = 0;
        setTimeout(() => toast.remove(), 400);
      }, 10000);
    }

    // Your notifyBtn event listener can be placed here too
  </script>

    <script>
    // GLOBAL JS ERROR HANDLER
    window.addEventListener("error", (e) => {
      fetch("/errors", {
        method: "POST",
        body: JSON.stringify({
          type: "error",
          message: e.message,
          file: e.filename,
          line: e.lineno,
          col: e.colno,
          stack: e.error?.stack,
          url: location.href,
          ua: navigator.userAgent
        })
      });
    });

    // PROMISE ERROR HANDLER
    window.addEventListener("unhandledrejection", (e) => {
      fetch("/errors", {
        method: "POST",
        body: JSON.stringify({
          type: "promise",
          reason: e.reason?.toString(),
          stack: e.reason?.stack,
          url: location.href,
          ua: navigator.userAgent
        })
      });
    });
  </script>

  <!-- Ad container (hidden until 5th visit) -->
<div id="bottomAdContainer" style="
    display:none;
    width:100%;
    position:fixed;
    bottom:0;
    left:0;
    z-index:9999;
    text-align:center;
    padding:8px 0;
    background:rgba(0,0,0,0.9);
">
    <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-3625430905597433"
        data-ad-slot="5393173301"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
</div>

  <script>
(function() {
    // Count visits using localStorage
    let visits = localStorage.getItem("visit_count");
    visits = visits ? parseInt(visits) + 1 : 1;
    localStorage.setItem("visit_count", visits);

    // Show ads only after visit #5
    if (visits >= 5) {
        document.getElementById("bottomAdContainer").style.display = "block";

        // Dynamically load Google Ads script
        const adScript = document.createElement("script");
        adScript.async = true;
        adScript.src = "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3625430905597433";
        adScript.crossOrigin = "anonymous";
        document.head.appendChild(adScript);

        // Initialize ad slot after script loads
        adScript.onload = () => {
            (adsbygoogle = window.adsbygoogle || []).push({});
        };
    }
})();
</script>
</body>
</html>
