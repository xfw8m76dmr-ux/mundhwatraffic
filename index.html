<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üö¶ Mundhwa Bridge Pune Traffic Live | Real-Time Camera</title>
  <meta name="description" content="Watch live Mundhwa Bridge traffic in Pune, India ‚Äî streaming 24/7 with RoadX smart camera technology. Check road conditions before you travel." />
  <meta name="robots" content="index,follow,max-image-preview:large" />

  <!-- OG / Social -->
  <meta property="og:title" content="üö¶ Mundhwa Traffic Live | Pune" />
  <meta property="og:description" content="Watch Mundhwa Bridge traffic live from Pune. Real-time RoadX camera feed updated 24/7." />
  <meta property="og:image" content="https://mundhwatraffic.com/assets/og-preview.png" />
  <meta property="og:url" content="https://mundhwatraffic.com" />
  <meta property="og:type" content="video.other" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="üö¶ Mundhwa Traffic Live | Pune">
  <meta name="twitter:description" content="Watch real-time traffic at Mundhwa Bridge, Pune, India.">
  <meta name="twitter:image" content="https://mundhwatraffic.com/assets/og-preview.png">

  <!-- Icons -->
  <link rel="icon" href="/favicon-32x32.png" sizes="32x32" />
  <link rel="apple-touch-icon" href="/favicon-512.png" />
  <link rel="manifest" href="/site.webmanifest" />

  <style>
    body { margin:0;font-family:system-ui,Inter,sans-serif;background:#0b0b0b;color:#fff;text-align:center }
    header { background:#111;padding:1rem;font-size:1.5rem;font-weight:600 }
    main { padding:1rem }
    #yt-container { position:relative;max-width:960px;margin:1rem auto;aspect-ratio:16/9;background:black }
    #yt-container iframe, #yt-container img { width:100%;height:100%;border-radius:12px;display:block }
    #yt-overlay { position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;cursor:pointer;background:transparent }
    a { color:#33ccff;text-decoration:none }
    a:hover { text-decoration:underline }
    h2 { margin-top:2rem;font-size:1.3rem;font-weight:600 }
    button { background:#00b7ff;color:#fff;border:none;padding:.5rem 1rem;border-radius:6px;cursor:pointer }
    button:hover { opacity:.9 }
    footer { opacity:.8;font-size:.9rem;margin-top:2rem;padding-bottom:1rem }
    #bookmarkHelp { display:none; }
  </style>

  <!-- GA -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-TVFRVGXERM"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-TVFRVGXERM', { anonymize_ip:true });
  </script>

  <script>
    /* ---------------------------------
   WEEKDAY TRAFFIC ALERT SCHEDULER
---------------------------------- */

const saveBtn = document.getElementById("saveScheduleBtn");
const removeBtn = document.getElementById("removeAlertsBtn");
const scheduleStatus = document.getElementById("scheduleStatus");

saveBtn.addEventListener("click", async () => {
  const selected = [...document.querySelectorAll(".alertTime:checked")]
    .map(input => input.value);

  if (selected.length === 0) {
    scheduleStatus.textContent = "Please select at least one time.";
    return;
  }

  scheduleStatus.textContent = "Requesting permission‚Ä¶";

  const permission = await OneSignal.Notifications.requestPermission();
  if (permission !== "granted") {
    scheduleStatus.textContent = "Notifications blocked.";
    return;
  }

  await OneSignal.User.pushSubscription.optIn();

  const playerId = await OneSignal.User.pushSubscription.id();
  if (!playerId) {
    scheduleStatus.textContent = "Subscription error.";
    return;
  }

  scheduleStatus.textContent = "Saving schedule‚Ä¶";

  const res = await fetch("https://mundhwatrafficreminder.k7jzqg8c4k.workers.dev/setSchedule", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ player_id: playerId, times: selected })
  });

  const json = await res.json();
  if (json.error) scheduleStatus.textContent = "Error: " + json.error;
  else scheduleStatus.textContent = "‚úÖ Schedule saved!";
});


removeBtn.addEventListener("click", async () => {
  scheduleStatus.textContent = "Removing‚Ä¶";

  const playerId = await OneSignal.User.pushSubscription.id();

  const res = await fetch("https://mundhwatrafficreminder.k7jzqg8c4k.workers.dev/remove", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ player_id: playerId })
  });

  scheduleStatus.textContent = "üóëÔ∏è All notifications removed.";
});

  </script>

  <!-- OneSignal -->
  <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
  <script>
    window.OneSignalDeferred = window.OneSignalDeferred || [];
    OneSignalDeferred.push(async function(OneSignal) {
      await OneSignal.init({
        appId: "4431abd4-0179-41dd-8336-d8ba2f83f93a",
        notifyButton: { enable:true },
      });
      window.OneSignal = OneSignal;
    });
  </script>
</head>

<body>

<header>üö¶ Live Traffic Feed ‚Äì Mundhwa Bridge, Pune</header>

<main>

  <!-- YouTube Lazy Preview -->
  <div id="yt-container">
    <img src="https://mundhwatraffic.com/assets/Unknown.jpg"
         alt="Mundhwa Bridge Live Traffic Pune Preview"
         width="960" height="540" loading="lazy" fetchpriority="high">
    <div id="yt-overlay">
      <span style="font-size:2.1rem;opacity:.8;background:#0008;padding:.5rem 1rem;border-radius:6px;">‚ñ∂ Play Live Feed</span>
    </div>
  </div>

  <!-- SHARE -->
  <section id="share-section">
    <h2>üì¢ Share Live Feed</h2>
    <div style="display:flex;justify-content:center;gap:1rem;flex-wrap:wrap;">
      <a href="https://api.whatsapp.com/send?text=üö¶%20Check%20Mundhwa%20Bridge%20Traffic%20Live!%20https://mundhwatraffic.com/w" target="_blank">WhatsApp</a>
      <a href="https://twitter.com/intent/tweet?text=üö¶%20Mundhwa%20Bridge%20Traffic%20Live!&url=https://mundhwatraffic.com/x" target="_blank">X (Twitter)</a>
      <a href="https://www.facebook.com/sharer/sharer.php?u=https://mundhwatraffic.com/f" target="_blank">Facebook</a>
      <button id="nativeShareBtn">üì± Share</button>
    </div>
  </section>

  <!-- BOOKMARK -->
  <section id="bookmark-section">
    <h2>üîñ Add to Bookmarks</h2>
    <p>Quickly access Mundhwa Traffic Live anytime!</p>
    <button id="bookmarkBtn">‚≠ê Add to Bookmarks</button>
    <p id="bookmarkHelp">
      üìå <strong>Press</strong> <span id="shortcut"></span> <strong>to bookmark this page.</strong>
    </p>
  </section>

  <!-- ANDROID A2HS BUTTON -->
  <div style="margin-top:1rem;">
    <button id="installBtn" style="display:none;">üì± Add to Home Screen</button>
  </div>


  <section id="schedule-alerts" style="margin-top:2rem;">
  <h2>‚è∞ Choose Traffic Alert Schedule</h2>

  <p>Receive alerts on weekdays only (Mon‚ÄìFri).</p>

  <label>
    <input type="checkbox" class="alertTime" value="10:00">
    10:00 AM
  </label><br>

  <label>
    <input type="checkbox" class="alertTime" value="16:00">
    4:00 PM
  </label><br>

  <!-- Add more time options here if needed -->

  <button id="saveScheduleBtn" style="margin-top:1rem;">Save Schedule</button>
  <button id="removeAlertsBtn" style="margin-left:1rem;">Remove All Notifications</button>

  <p id="scheduleStatus" style="margin-top:0.7rem; opacity:0.8;"></p>
</section>


  <div id="viewer-count" style="margin-top:1rem;opacity:.8;">üî¥ Live now on YouTube</div>

</main>

<footer>¬© 2025 <a href="/">mundhwatraffic.com</a> | Powered by <strong>RoadX Traffic Cameras</strong></footer>

<!-- =============================== -->
<!--             SCRIPTS             -->
<!-- =============================== -->
<script>
/* ---------------------------------
   LAZY YOUTUBE
---------------------------------- */
document.getElementById("yt-overlay").addEventListener("click", () => {
  document.getElementById("yt-container").innerHTML =
    `<iframe src="https://www.youtube.com/embed/live_stream?channel=UCOCdYbhwwwgNXj58pHsU1Fw&autoplay=1&mute=1"
      allow="accelerometer;autoplay;encrypted-media;picture-in-picture"
      allowfullscreen loading="lazy"
      style="width:100%;aspect-ratio:16/9;border:none;border-radius:12px;"></iframe>`;
});

/* ---------------------------------
   NATIVE SHARE
---------------------------------- */
const nativeShare = document.getElementById("nativeShareBtn");
if (navigator.share) {
  nativeShare.addEventListener("click", () => {
    navigator.share({
      title:"üö¶ Mundhwa Traffic Live | Pune",
      text:"Check Mundhwa Bridge traffic live before leaving!",
      url:"https://mundhwatraffic.com"
    });
  });
} else {
  nativeShare.style.display = "none";
}

/* ---------------------------------
   BOOKMARK BUTTON ‚Äî FIXED FOR ANDROID/iOS/DESKTOP
---------------------------------- */
const bookmarkBtn = document.getElementById('bookmarkBtn');
const bookmarkHelp = document.getElementById('bookmarkHelp');
const shortcut = document.getElementById('shortcut');

const ua = navigator.userAgent.toLowerCase();
const isIOS = /iphone|ipad|ipod/.test(ua);
const isAndroid = /android/.test(ua);
const isDesktopMac = navigator.platform.toUpperCase().includes("MAC");
const isDesktopWin = navigator.platform.toUpperCase().includes("WIN");

/* Correct bookmark/Add-to-home-screen text */
if (isIOS) {
  shortcut.innerText = "Share ‚Üí Add to Home Screen";
} else if (isAndroid) {
  shortcut.innerText = "Menu ‚ãÆ ‚Üí Add to Home Screen";
} else if (isDesktopMac) {
  shortcut.innerText = "Cmd + D";
} else if (isDesktopWin) {
  shortcut.innerText = "Ctrl + D";
} else {
  shortcut.innerText = "Ctrl + D";
}

bookmarkBtn.addEventListener("click", () => {
  bookmarkHelp.style.display = "block";
});

/* ---------------------------------
   ANDROID ADD TO HOME SCREEN
---------------------------------- */
let deferredPrompt;
const installBtn = document.getElementById("installBtn");

window.addEventListener("beforeinstallprompt", (e) => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = "inline-block";
});

installBtn.addEventListener("click", () => {
  installBtn.style.display = "none";
  deferredPrompt.prompt();
  deferredPrompt = null;
});

/* ---------------------------------
   SERVICE WORKER
---------------------------------- */
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("/service-worker.js");
}

/* ---------------------------------
   iOS ADD-TO-HOME-SCREEN POPUP
---------------------------------- */
(function() {
  const popup = document.createElement("div");
  popup.id = "iosInstallPopup";
  popup.innerHTML = `
    <div style="display:flex;align-items:center;gap:10px;">
      <img src="/apple-touch-icon.png" width="40" height="40" style="border-radius:8px;">
      <div style="text-align:left;">
        <strong>Add to Home Screen</strong><br>
        Tap <span style="font-size:1.2rem;">‚¨ÜÔ∏è</span> then <b>Add to Home Screen</b>
      </div>
    </div>
  `;

  popup.style.cssText = `
    display:none; position:fixed; bottom:20px; left:50%; transform:translateX(-50%);
    background:#111; color:#fff; padding:14px 18px; border-radius:14px;
    font-size:0.95rem; z-index:9999; width:85%; max-width:300px;
    box-shadow:0 8px 20px #0007; opacity:0; transition:opacity 0.4s ease;
  `;

  document.body.appendChild(popup);

  const isIOSDevice = /iPhone|iPad|iPod/.test(navigator.userAgent);
  const isStandalone = window.matchMedia("(display-mode: standalone)").matches
                    || window.navigator.standalone === true;

  if (!isIOSDevice) return;
  if (isStandalone) return;
  if (localStorage.getItem("a2hs_shown")) return;

  setTimeout(() => {
    popup.style.display = "block";
    setTimeout(() => popup.style.opacity = "1", 50);
  }, 2000);

  setTimeout(() => {
    popup.style.opacity = "0";
    setTimeout(() => popup.style.display = "none", 400);
  }, 10000);

  localStorage.setItem("a2hs_shown", "yes");
})();
</script>

</body>
</html>
