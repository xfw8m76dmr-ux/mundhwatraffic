<!DOCTYPE html>
<html lang="en">
<head>
    <!-- üí† CRITICAL PRECONNECTS -->
<link rel="preconnect" href="https://pagead2.googlesyndication.com" crossorigin>
<link rel="preconnect" href="https://googleads.g.doubleclick.net" crossorigin>
<link rel="preconnect" href="https://cdn.onesignal.com" crossorigin>

<link rel="preconnect" href="https://i.ytimg.com">
<link rel="preconnect" href="https://www.youtube.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<!-- üí† PRELOAD CRITICAL RESOURCES -->
<link rel="preload" href="/style.css" as="style">

<!-- Preload LCP Image -->
<link rel="preload" href="/assets/video_background.webp" as="image" fetchpriority="high" />

<!-- do not Preload GA script as per Google
<link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=G-TVFRVGXERM" as="script"> -->

<!-- üí† OPTIONAL (SAFE) DNS PREFETCH -->
<link rel="dns-prefetch" href="https://pagead2.googlesyndication.com">
<link rel="dns-prefetch" href="https://googleads.g.doubleclick.net">
<link rel="dns-prefetch" href="https://cdn.onesignal.com">
<link rel="dns-prefetch" href="https://www.youtube.com">
<link rel="dns-prefetch" href="https://i.ytimg.com">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üö¶ Mundhwa Bridge Pune Traffic Live | Real-Time Camera</title>
  <meta name="description" content="Watch live Mundhwa Bridge traffic in Pune, India ‚Äî streaming 24/7 with RoadX smart camera technology. Check road conditions before you travel." />
  <meta name="robots" content="index,follow,max-image-preview:large" />

  <!-- CSS -->
  <link rel="stylesheet" href="/style.css">

  <!-- OG -->
  <meta property="og:title" content="üö¶ Mundhwa Traffic Live | Pune" />
  <meta property="og:description" content="Watch Mundhwa Bridge traffic live from Pune. Real-time RoadX camera feed updated 24/7." />
  <meta property="og:image" content="https://mundhwatraffic.com/assets/og-preview.png" />
  <meta property="og:url" content="https://mundhwatraffic.com" />
  <meta property="og:type" content="video.other" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="üö¶ Mundhwa Traffic Live | Pune">
  <meta name="twitter:description" content="Watch real-time traffic at Mundhwa Bridge, Pune, India.">
  <meta name="twitter:image" content="https://mundhwatraffic.com/assets/og-preview.png">

  <link rel="icon" href="/favicon-32x32.png" sizes="32x32" />
  <link rel="apple-touch-icon" href="/favicon-512.png" />
  <link rel="manifest" href="/site.webmanifest" />

  <!-- Preload GA -->
  <link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=G-TVFRVGXERM" as="script">

  <!-- FAQ Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      { "@type": "Question", "name": "Is Mundhwa Bridge jammed right now?",
        "acceptedAnswer": { "@type": "Answer", "text": "Check real-time status on this page." }
      },
      { "@type": "Question", "name": "Peak timings?",
        "acceptedAnswer": { "@type": "Answer", "text": "9‚Äì11 AM and 6‚Äì8:30 PM." }
      },
      { "@type": "Question", "name": "Delay?",
        "acceptedAnswer": { "@type": "Answer", "text": "Usually 5‚Äì25 minutes." }
      },
      { "@type": "Question", "name": "Live camera?",
        "acceptedAnswer": { "@type": "Answer", "text": "Yes, updated every few minutes." }
      },
      { "@type": "Question", "name": "Accuracy?",
        "acceptedAnswer": { "@type": "Answer", "text": "Updated regularly using live snapshots." }
      }
    ]
  }
  </script>

</head>

<body>

<header>üö¶ Live Traffic View ‚Äì Mundhwa Bridge, Pune</header>

<div class="page-intro">
  <p>Mundhwa Bridge is one of Pune‚Äôs busiest choke points connecting major IT hubs.</p>
  <p>This live stream helps commuters check real-time traffic before leaving.</p>
</div>

<main>

  <!-- VIDEO -->
  <div id="yt-container">
<img src="/assets/video_background.webp"
     alt="Mundhwa Bridge Live Traffic Pune Preview"
     width="960"
     height="540"
     loading="eager"
     fetchpriority="high">
 <!--   <img src="https://mundhwatraffic.com/assets/video_background.png"
         alt="Mundhwa Bridge Live Traffic Pune Preview"
         width="960" height="540"
         loading="eager" fetchpriority="high">
    -->
    <div id="yt-overlay"><span>Play Live</span></div>
  </div>

  <!-- NOTIFY CTA -->
  <div class="notify-wrap">
    <button id="notifyBtn" class="notify-btn">üîî Get Heavy Traffic Alerts</button>
    <div class="notify-desc">No spam ‚Äî only realtime jam alerts.</div>
    <div class="notify-desc">AI-powered alerts ‚Äî may be imperfect.</div>
  </div>

  <div id="notifyHelp" style="display:none"></div>

  <!-- SHARE -->
  <section>
    <h3>üì¢ Share MundhwaTraffic with someone stuck in traffic üöó‚ö†Ô∏è</h3>
    <div id="share-icons">
      <a href="https://api.whatsapp.com/send?text=üö¶%20Check%20Mundhwa%20Traffic%20Live%20https://mundhwatraffic.com/w">
        <img src="/assets/icons/whatsapp.svg" alt="WhatsApp" loading="lazy">
      </a>
      <a href="https://twitter.com/intent/tweet?text=üö¶%20Mundhwa%20Traffic%20Live&url=https://mundhwatraffic.com/x">
        <img src="/assets/icons/x.svg" alt="X" loading="lazy">
      </a>
      <a href="https://www.facebook.com/sharer/sharer.php?u=https://mundhwatraffic.com/f">
        <img src="/assets/icons/facebook.svg" alt="Facebook" loading="lazy">
      </a>
      <img id="nativeShareBtn" src="/assets/icons/share.svg" alt="Share" loading="lazy">
    </div>
  </section>

  <p id="bookmarkHelp"></p>

  <div id="viewer-count">üî¥ Live on YouTube</div>

  <button id="installBtn" class="primary-btn" style="display:none;">üì± Add to Home Screen</button>

  <!-- CONTENT SECTIONS -->
  <section id="traffic-info">

    <div class="section-card">
      <h2>üöó About Mundhwa Bridge Traffic</h2>
      <p>Mundhwa Bridge often changes traffic conditions within minutes due to metro work, lane blocks, office hours, weather, and more.</p>
      <p>This live camera helps commuters choose smarter routes.</p>
    </div>

    <div class="section-card">
      <h3>üïí Peak Traffic Timings</h3>
      <ul>
        <li><strong>Morning:</strong> 9:00 ‚Äì 11:00 AM</li>
        <li><strong>Evening:</strong> 6:00 ‚Äì 8:30 PM</li>
      </ul>
    </div>

    <div class="section-card">
      <h3>üìä What Affects Traffic?</h3>
      <ul>
        <li>Metro & road construction</li>
        <li>Breakdowns & accidents</li>
        <li>IT park commute surge</li>
        <li>School timings</li>
        <li>Rain or weather issues</li>
      </ul>
    </div>

    <div class="section-card">
      <h3>üõ£Ô∏è Why This Camera Exists</h3>
      <p>Thousands check this camera daily to decide whether to take Mundhwa or detour via Magarpatta.</p>
    </div>

    <div class="section-card">
      <h3>‚ö†Ô∏è Important Note</h3>
      <p>Occasional interruptions may occur due to maintenance or connectivity issues.</p>
    </div>

  </section>

  <div id="debugBox"></div>

</main>

<footer>
  ¬© 2025 <a href="/">mundhwatraffic.com</a> |
  <a href="/about.html">About</a> |
  <a href="/privacy.html">Privacy Policy</a> |
  <a href="/terms.html">Terms of Use</a><br>
  Powered by <strong>RoadX Traffic Cameras</strong>
</footer>

<!-- YOUTUBE PLAYER -->
<script>
document.getElementById("yt-overlay").addEventListener("click", () => {
  const c = document.getElementById("yt-container");
  while (c.firstChild) c.removeChild(c.firstChild);
  const iframe = document.createElement("iframe");
  iframe.src="https://www.youtube.com/embed/live_stream?channel=UCOCdYbhwwwgNXj58pHsU1Fw&autoplay=1&mute=1&playsinline=1&enablejsapi=1&rel=0&controls=1&origin=https://mundhwatraffic.com";
  iframe.allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture;";
  iframe.allowFullscreen = true;
  c.appendChild(iframe);
});
setInterval(() => {
  const iframe=document.querySelector("#yt-container iframe");
  if (iframe) iframe.contentWindow.postMessage('{"event":"command","func":"playVideo"}',"*");
},15000);
</script>

<!-- NATIVE SHARE -->
<script>
const nativeShareBtn = document.getElementById("nativeShareBtn");
if (navigator.share){
  nativeShareBtn.addEventListener("click", () => {
    navigator.share({
      title: "üö¶ Mundhwa Traffic Live | Pune",
      text: "Check live Mundhwa Bridge traffic.",
      url: "https://mundhwatraffic.com/web"
    });
  });
} else {
  nativeShareBtn.style.opacity="0.4";
}
</script>

 
  <!-- AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3625430905597433" crossorigin="anonymous"></script>

  <!-- LocalBusiness Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "name": "Mundhwa Traffic Live",
    "description": "Real-time Mundhwa Bridge traffic and live CCTV updates.",
    "areaServed": "Mundhwa, Pune",
    "url": "https://mundhwatraffic.com"
  }
  </script>

  <!-- GA Loader (preserved exactly) -->
  <script defer>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }

    (function loadGA(){
      const s = document.createElement('script');
      s.src = "https://www.googletagmanager.com/gtag/js?id=G-TVFRVGXERM";
      s.async = true;
      s.onload = function() {
        gtag('js', new Date());
        gtag('config', 'G-TVFRVGXERM', { anonymize_ip: true, transport_type:'beacon' });
      };
      s.onerror = () => setTimeout(loadGA, 1500);
      document.head.appendChild(s);
    })();
  </script>

  <!-- GEO tagging -->
  <script>
  function waitForGA(cb, tries=30){
    if (typeof gtag==="function" && window.dataLayer?.push) cb();
    else if (tries>0) setTimeout(()=>waitForGA(cb,tries-1),150);
  }
//  fetch('/geo')
//    .then(r=>r.json())
//    .then(loc=>{
 //     waitForGA(() => {
  //      gtag('set','user_properties',{
  //        user_area: loc.area || 'unknown',
 //         user_zone: loc.zone || 'unknown'
  //      });
  //    });
 //   });
  </script>

  <script src="/tracking.js" defer></script>
   

<!-- INSTALL PWA -->
<script>
let deferredPrompt;
const installBtn=document.getElementById("installBtn");
window.addEventListener("beforeinstallprompt",(e)=>{
  e.preventDefault();
  deferredPrompt=e;
  installBtn.style.display="inline-flex";
});
installBtn.addEventListener("click",()=>{
  installBtn.style.display="none";
  deferredPrompt.prompt();
});
</script>

<!-- OneSignal LOADED EXACTLY LIKE BEFORE -->
<script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>

<script>
/* vars for notify flow */
const notifyBtn=document.getElementById("notifyBtn");
const notifyHelp=document.getElementById("notifyHelp");

const ua=navigator.userAgent.toLowerCase();
const isIOS=/iphone|ipad|ipod/.test(ua);
const isPWA=window.matchMedia('(display-mode: standalone)').matches || navigator.standalone===true;
const isFacebookBrowser=navigator.userAgent.includes("FBAN") || navigator.userAgent.includes("FBAV");
const isInstagramBrowser=navigator.userAgent.includes("Instagram");

/* OneSignal init ‚Äî FULLY RESTORED */
window.OneSignalDeferred=window.OneSignalDeferred||[];
OneSignalDeferred.push(async function(OneSignal){
  try{
    await OneSignal.init({
      appId:"4431abd4-0179-41dd-8336-d8ba2f83f93a",
      serviceWorkerPath:"OneSignalSDKWorker.js",
      serviceWorkerParam:{scope:"/"},
      notifyButton:{enable:false}
    });
  }catch(e){ console.error(e); }
});

/* SHOWTOAST (restored fully) */
function showToast(message){
  const t=document.createElement("div");
  t.textContent=message;
  t.style=`
    position:fixed; bottom:20px; left:50%; transform:translateX(-50%);
    background:#222; color:#fff; padding:12px 18px;
    border-radius:8px; font-size:14px; opacity:0;
    transition:opacity .4s; z-index:99999;
  `;
  document.body.appendChild(t);
  requestAnimationFrame(()=>{ t.style.opacity=1; });
  setTimeout(()=>{
    t.style.opacity=0;
    setTimeout(()=>t.remove(),400);
  },7000);
}

/* NOTIFY BUTTON CLICK LISTENER (FULLY RESTORED, UNMODIFIED) */
notifyBtn.addEventListener("click", async () => {

  if (isFacebookBrowser || isInstagramBrowser){
    if (isIOS){
      showToast(`
‚ö†Ô∏è iOS does not allow notifications inside Facebook.

To enable alerts:
1Ô∏è‚É£ Tap ‚Ä¢‚Ä¢‚Ä¢
2Ô∏è‚É£ Open in Safari
3Ô∏è‚É£ Add to Home Screen
4Ô∏è‚É£ Open from Home Screen then tap Notify again.
      `);
    } else {
      showToast(`
‚ö†Ô∏è FB In-App Browser doesn't support notifications.
Tap menu ‚Üí Open in Browser ‚Üí choose Chrome.
      `);
    }
    return;
  }

  if (isIOS && !isPWA){
    showToast(`
üì± Add to Home Screen required for iOS alerts.

Tap Share ‚Üí "Add to Home Screen".
    `);
    return;
  }

  try{
    const permission = await OneSignal.Notifications.requestPermission();
    if (!permission){ showToast("üîï Permission denied."); return; }

    showToast("‚è≥ Subscribing‚Ä¶");
    await OneSignal.User.PushSubscription.optIn();

    const ok = await OneSignal.User.PushSubscription.isOptedIn();
    showToast(ok ? "‚úÖ Alerts enabled!" : "‚ö†Ô∏è Subscription failed.");
  }catch(e){
    showToast("‚úÖ Alerts enabled! (fallback)");
    console.error(e);
  }
});
</script>

<!-- iOS keepalive audio -->
<script>
(function(){
  const ua=navigator.userAgent.toLowerCase();
  const isIOS=/iphone|ipad|ipod/.test(ua);
  const isPWA=window.matchMedia('(display-mode: standalone)').matches || navigator.standalone===true;

  if (isIOS && isPWA){
    const audio=document.createElement("audio");
    audio.autoplay=true; audio.loop=true; audio.hidden=true;
    audio.src="data:audio/mp3;base64,//uQxAAAAAAAAAAAAAAAAAAA...";
    document.body.appendChild(audio);
  }
})();
</script>

<!-- Error tracking -->
<script>
window.addEventListener("error",(e)=>{
  fetch("/errors",{method:"POST",body:JSON.stringify({
    type:"error",message:e.message,file:e.filename,line:e.lineno,col:e.colno,
    stack:e.error?.stack,url:location.href,ua:navigator.userAgent
  })});
});
window.addEventListener("unhandledrejection",(e)=>{
  fetch("/errors",{method:"POST",body:JSON.stringify({
    type:"promise",reason:e.reason?.toString(),stack:e.reason?.stack,
    url:location.href,ua:navigator.userAgent
  })});
});
</script>

<div style="height:80px;"></div>

<!-- Ads -->
<div id="bottomAdContainer" style="
  display:none; width:100%; height:60px; position:fixed; bottom:0; left:0;
  z-index:9999; background:rgba(0,0,0,0.92); display:flex;
  align-items:center; justify-content:center; box-shadow:0 -2px 8px rgba(0,0,0,0.3);
">
  <ins id="adSlot" class="adsbygoogle"
      style="display:inline-block;width:100%;height:60px;"
      data-ad-client="ca-pub-3625430905597433"
      data-ad-slot="5393173301"
      data-ad-format="horizontal"
      data-full-width-responsive="false"></ins>
</div>

</body>
</html>
